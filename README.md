# sf_practice
For Skill Factory study project (B10, PR)

<br>


### 01. Общее описание

```bash
Vagrant конфигурация (Vagrantfile) с помощью которой на хосте с установленной платформой виртуализации Orcale Virtual Box,
создается виртуальная машина на основе базового образа Ubuntu 18.04 полученного из облачного репозитория Vagrant Cloud
с дополнительно установлеными Python3, Django и прочими модулями необходимыми для работы с PostgreSQL СУБД в режиме Клиента.
Созданная ВМ будет отображаться в списке VirtualBox с именем "ubuntu1804-pgsql84-app" 
и будет доступна по ip-адресу 192.168.0.71

Данный проект (PR) является дополнением к проекту ранее выполненного домашнего задания (HW)
https://github.com/VictorNuzhdin/sf__legacy_vagrant
в котором создавалась Vagrant конфигурация серверной части - ВМ с установленной и настроенной СУБД PostgreSQL 8.4
```

### 02. Порядок работы

```bash
1. скопировать Vagrantfile на физическую хост машину (например 192.168.0.100) на которой установлен Vagrant и Orcale VirtualBox

2. перейти в каталог с Vagrantfile и выполнит команду для начала процесса создания ВМ в VirtualBox на основе инструкций Vagrantfile
   $ vagrant up

3. после успешного создания, ВМ появится в списке VirtualBox под именем "ubuntu1804-pgsql84-app"

4. в процессе создания ВМ, в терминале будут выводится результаты выполнения шагов настройки из Vagrantfile
   и в итоге отобразится результат выполнения тестовых SQL запросов к PostgreSQL серверу работающему на внешнем хосте (ВМ).
   ВМ с СУБД PostgreSQL 8.4 должна быть предварительно запущена и доступна по ip адресу 192.168.0.70

5. для подключения к ВМ можно воспользоваться встроенным в Vagrant ssh инструментом, выполнив соотв. команду.
   При этом настройки подключения будут определены автоматически, а в качестве логина и пароля будут использованы "vagrant", "vagrant".
   Эти учетные данные являются встроенными во все .box базовые образы размещенные в облачном репозитории Vagrant Cloud.
   $ vagrant ssh

6. также можно подключиться обычным ssh-клиентом от имени доп. учетной записи "devops" (с авторизацией по ssh-ключу) которая создается в Vagrantfile
   учитывая что 192.168.0.71 - это ip адрес ВМ который закодирован в Vagrantfile (его можно изменить соотв. переменной)
   $ ssh devops@192.168.0.71 -i ./ssh/id_ed25519

7. после успешного запуска указанных двух ВМ
   1. ubuntu1804-pgsql84-srv  @192.168.0.70
   2. ubuntu1804-pgsql84-app  @192.168.0.71

   можно с помощью браузера проверить результат работы Python3 Django веб-приложения, перейдя в бразуере по URL:
   http://192.168.0.71:8000/

   при этом будет отображена основная навигационная страница содержащая коды стран
   при клике на которые будет отображена страница приветсвия на языке этой страны
   например, при клике на элемент "ENG" будет отображена страница содержащая слово "hello"
   при клике на элемент "ALL" будет отображена таблица содержащая все записи из соотв. таблицы PostgreSQL БД
   *скриншоты см. ниже

   исходный код Python3 Django веб-приложения размещен в каталоге "src/webapp-postgres-django" текущего репозитория
   этот исходный код копируется на создаваемую ВМ в Vagrantfile
```

### 03. Важные замечания

```bash
В Vagranfile для создания ВМ VirtualBox используеся базовый образ "Ubuntu 18.04" (ubuntu/bionic64).
При выполнении команды "vagrant up" этот образ скачивается и облачного репозитория Vagrant Cloud принадлежащего компании Hashicorp.
В связи с технологическими санкциями доступ к этому ресурсу с Россиийских IP адресов невозможен,
поэтому для успешного выполнения команды необходимо (один из предложенных вариантов, либо иной):

1. Самостоятельно настроить свой прокси VPN сервер, либо найти существующий и настроить ОС так чтобы все HTTP/HTTPS запросы из консольных клиентов
   проходили в прозрачном режиме через этот прокси, осуществляя таким образом подмену публичного ip-адреса
   (этот способ в курсе SkillFactory не рассматривается на момент середины Мая 2023 года, хотя он имеет повышенную актуальность для всех заданий);

2. На любом ПК на котором в бразузере установлен VPN клиент, вручную скачать необходимый базовый образ по ссылке
   https://app.vagrantup.com/ubuntu/boxes/bionic64
   интересует провайдер VirtualBox, поэтому скачиваем базовый образ для него
   https://app.vagrantup.com/ubuntu/boxes/bionic64/versions/20230425.0.0/providers/virtualbox.box

   после этого помещаем скачанный box на Хост на котором установлен Vagrant и VirtualBox
   и вручную добавляем его в локальный репозиторий Vagrant чтобы Vagrant не искал его в облачном репозитории к которому нет доступа
   $ vagrant box add ubuntu/bionic64 /home/devops/vagrant/_boxes/ubuntu/ubuntu/bionic64/v20230425.0.0/virtualbox.box
   $ vagrant box list
     результат:
        ubuntu/bionic64  (virtualbox, 0)

   далее можно выполнять команду формирования и запуска ВМ из Vagrantfile
   $ vagrant up

   теперь при выполнении инструкции 'config.vm.box = "ubuntu/bionic64"'
   базовый образ будет браться сразу из локального репозитория Vagrant, а не скачиваться из облачного
```

### 04. Результат работы Django веб-приложения

Скриншот1: Основная/Домашняя страница
![screen](_screens/hellowords__1_index.png?raw=true)

Скриншот2: Все приветствия в виде таблицы
![screen](_screens/hellowords__2_ALL.png?raw=true)

Скриншот3: Приветствие на Английском (ENG) языке
![screen](_screens/hellowords__3_ENG.png?raw=true)

Скриншот4: Приветствие на Французском (FRA) языке
![screen](_screens/hellowords__4_FRA.png?raw=true)

Скриншот5: Приветствие на Русском (RUS) языке
![screen](_screens/hellowords__5_RUS.png?raw=true)
